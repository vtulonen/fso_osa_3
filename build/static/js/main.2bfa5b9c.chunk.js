(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),o=n.n(s),r=n(14),a=n.n(r),i=(n(20),n(3)),u=n(4),l=n.n(u),d="/api/persons",j={getAll:function(){return l.a.get(d)},create:function(e){return l.a.post(d,e)},update:function(e,t){return l.a.put("".concat(d,"/").concat(e),t)},destroy:function(e){return l.a.delete("".concat(d,"/").concat(e))}},f=function(e){var t=e.newName,n=e.setNewName,s=e.persons,o=e.setPersons,r=e.newNumber,a=e.setNewNumber,i=e.displayNotification;return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:t,number:r};void 0===s.find((function(e){return e.name===t}))?j.create(c).then((function(e){o(s.concat(e.data)),i("success","".concat(t," added successfully")),n(""),a("")})).catch((function(e){console.log(e.response.data),i("error",e.response.data.error)})):s.find((function(e){return e.number===r}))?alert("".concat(t," is already in the phonebook")):function(e,n){window.confirm("".concat(t," is already in the phonebook. Do you wish to update the number?"))&&j.update(e,n).then((function(e){200===e.status&&j.getAll().then((function(e){o(e.data),i("success","".concat(n.name,"'s number updated successfully"))}))})).catch((function(t){i("error","".concat(n.name," already removed from the server")),o(s.filter((function(t){return t.id!==e})))}))}(s.find((function(e){return e.name===t})).id,c)},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:function(e){a(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var t=e.name,n=e.number,s=e.persons,o=e.setPersons,r=e.displayNotification;return Object(c.jsxs)("div",{className:"person",children:[Object(c.jsxs)("span",{children:[t," ",n]}),Object(c.jsx)("button",{onClick:function(){if(window.confirm("Do you want to delete ".concat(t,"?"))){var e=s.find((function(e){return e.name===t})).id;j.destroy(e).then((function(e){204===e.status&&j.getAll().then((function(e){o(e.data),r("success","".concat(t," removed successfully"))}))})).catch((function(e){console.log(e)}))}},children:"delete"})]})},m=function(e){var t=e.persons,n=e.setPersons,s=e.filter,o=e.displayNotification;return Object(c.jsx)("div",{className:"persons",children:t.map((function(e){return e.name.toLowerCase().includes(s)?Object(c.jsx)(b,{name:e.name,number:e.number,persons:t,setPersons:n,displayNotification:o},e.name):null}))})},h=function(e){var t=e.filter,n=e.setFilter;return Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"Filter names "}),Object(c.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},p=function(e){var t=e.type,n=e.message;return null===n?null:Object(c.jsx)("div",{className:t,children:n})},O=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(s.useState)(""),a=Object(i.a)(r,2),u=a[0],l=a[1],d=Object(s.useState)(""),b=Object(i.a)(d,2),O=b[0],v=b[1],x=Object(s.useState)(""),N=Object(i.a)(x,2),y=N[0],w=N[1],g=Object(s.useState)(null),S=Object(i.a)(g,2),P=S[0],k=S[1],C=Object(s.useState)(null),A=Object(i.a)(C,2),D=A[0],F=A[1],E=function(e,t){F(e),k(t),setTimeout((function(){k(null)}),5e3)};return Object(s.useEffect)((function(){j.getAll().then((function(e){o(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(p,{type:D,message:P}),Object(c.jsx)(h,{filter:y,setFilter:w}),Object(c.jsx)("h2",{children:"Add new"}),Object(c.jsx)(f,{newName:u,setNewName:l,persons:n,setPersons:o,newNumber:O,setNewNumber:v,displayNotification:E}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(m,{persons:n,setPersons:o,filter:y.toLowerCase(),displayNotification:E})]})};a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(O,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2bfa5b9c.chunk.js.map